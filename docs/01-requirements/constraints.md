# 制約事項

## 目次

- [概要](#概要)
- [技術的制約](#技術的制約)
  - [TEC-001: 開発言語・フレームワーク](#tec-001-開発言語フレームワーク)
  - [TEC-002: データベース](#tec-002-データベース)
  - [TEC-003: クラウドプラットフォーム](#tec-003-クラウドプラットフォーム)
  - [TEC-004: 社内認証システム連携](#tec-004-社内認証システム連携)
  - [TEC-005: 社内ネットワーク制約](#tec-005-社内ネットワーク制約)
  - [TEC-006: ブラウザサポート](#tec-006-ブラウザサポート)
  - [TEC-007: モバイル対応](#tec-007-モバイル対応)
  - [TEC-008: 会計システム連携](#tec-008-会計システム連携)
  - [TEC-009: QRコード標準](#tec-009-qrコード標準)
- [ビジネス上の制約](#ビジネス上の制約)
  - [BIZ-001: 予算制約](#biz-001-予算制約)
  - [BIZ-002: スケジュール制約](#biz-002-スケジュール制約)
  - [BIZ-003: 人的リソース制約](#biz-003-人的リソース制約)
  - [BIZ-004: 総務部との連携](#biz-004-総務部との連携)
  - [BIZ-005: 既存Excel資産データの移行](#biz-005-既存excel資産データの移行)
- [法的・規制上の制約](#法的規制上の制約)
  - [LEG-001: 個人情報保護法](#leg-001-個人情報保護法)
  - [LEG-002: 固定資産管理規程](#leg-002-固定資産管理規程)
  - [LEG-003: 情報セキュリティポリシー](#leg-003-情報セキュリティポリシー)
  - [LEG-004: 監査対応](#leg-004-監査対応)
- [運用上の制約](#運用上の制約)
  - [OPS-001: 保守・運用体制](#ops-001-保守運用体制)
  - [OPS-002: データセンター](#ops-002-データセンター)
  - [OPS-003: メンテナンスウィンドウ](#ops-003-メンテナンスウィンドウ)
  - [OPS-004: バックアップ](#ops-004-バックアップ)
  - [OPS-005: ログ保存](#ops-005-ログ保存)
- [組織・プロセス上の制約](#組織プロセス上の制約)
  - [ORG-001: 承認プロセス](#org-001-承認プロセス)
  - [ORG-002: セキュリティ審査](#org-002-セキュリティ審査)
  - [ORG-003: コードレビュー](#org-003-コードレビュー)
  - [ORG-004: ドキュメント作成](#org-004-ドキュメント作成)
  - [ORG-005: 各拠点との調整](#org-005-各拠点との調整)
- [技術的負債・レガシー制約](#技術的負債レガシー制約)
  - [LEG-001: 既存Excel資産台帳](#leg-001-既存excel資産台帳)
  - [LEG-002: 既存ラベル・バーコード](#leg-002-既存ラベルバーコード)
- [環境制約](#環境制約)
  - [ENV-001: 開発環境](#env-001-開発環境)
  - [ENV-002: 社内ネットワーク](#env-002-社内ネットワーク)
  - [ENV-003: テスト環境](#env-003-テスト環境)
- [制約の優先順位](#制約の優先順位)
  - [絶対遵守（Must）](#絶対遵守must)
  - [強く推奨（Should）](#強く推奨should)
  - [可能な限り遵守（Could）](#可能な限り遵守could)
- [制約の緩和可能性](#制約の緩和可能性)
- [制約に起因するリスク](#制約に起因するリスク)
- [制約の変更管理](#制約の変更管理)
- [関連ドキュメント](#関連ドキュメント)

## 概要

このドキュメントでは、プロジェクト実施における各種制約を明記します。
制約は要件定義や設計において重要な考慮事項であり、プロジェクトの意思決定に影響を与えます。

---

## 技術的制約

### TEC-001: 開発言語・フレームワーク

**制約内容**:
- バックエンド: PHP + Laravel
- フロントエンド: React + TypeScript (Next.jsフレームワーク)

**理由**:
- 既存チームのスキルセット（PHP開発経験）
- 社内標準技術スタック
- Laravelの豊富な機能とエコシステム
- Next.jsによるSSR/SSG機能とパフォーマンス最適化
- TypeScriptによる型安全性の向上

**影響範囲**: 全体

**対応策**: なし（確定事項）

---

### TEC-002: データベース

**制約内容**:
リレーショナルデータベースはPostgreSQL 14以上を使用する

**理由**:
- トランザクション処理の信頼性
- JSON型サポートによる柔軟性
- 社内標準データベース
- ライセンス（オープンソース）

**影響範囲**: データベース設計

**対応策**:
- キャッシュはRedisを使用可能

---

### TEC-003: クラウドプラットフォーム

**制約内容**:
AWSを使用する（他のクラウドプラットフォームは使用しない）

**理由**:
- 社内の運用ノウハウ
- 既存システムとの連携
- 社内ネットワークとの接続済み

**影響範囲**: インフラ設計

**対応策**:
- マネージドサービスを積極活用
- インフラコードをTerraformで管理

---

### TEC-004: 社内認証システム連携

**制約内容**:
既存の社内認証システム（Active DirectoryまたはGoogle Workspace）と連携必須

**理由**:
- セキュリティポリシー
- ユーザー管理の一元化
- パスワード管理の簡素化

**影響範囲**: 認証設計、ユーザー管理

**対応策**:
- SSO（シングルサインオン）で実装
- OAuth 2.0またはSAML 2.0を使用

---

### TEC-005: 社内ネットワーク制約

**制約内容**:
システムは社内ネットワーク内からのみアクセス可能（外部公開不可）

**理由**:
- セキュリティポリシー
- 資産情報の機密性

**影響範囲**: インフラ設計、アクセス制御

**対応策**:
- VPN経由でのリモートアクセスを提供
- AWS PrivateLinkを使用した社内接続

---

### TEC-006: ブラウザサポート

**制約内容**:
Internet Explorer 11はサポート対象外

**理由**:
- IEのサポート終了（2022年6月）
- モダンブラウザ機能の活用
- 社内PC環境の最新化済み

**影響範囲**: フロントエンド開発

**対応策**:
- IEからアクセスした場合、エラーメッセージを表示

**サポート対象ブラウザ**:
- Chrome（最新版）
- Edge（最新版）
- Firefox（最新版）
- Safari（最新版）

---

### TEC-007: モバイル対応

**制約内容**:
フェーズ1ではレスポンシブWebで対応、ネイティブアプリは開発しない

**理由**:
- 開発コスト・期間の制約
- 主な利用シーンは社内PC
- 棚卸し用途でモバイル必要（レスポンシブで対応）

**影響範囲**: モバイル対応

**対応策**:
- PWA（Progressive Web App）として実装
- QRコード読み取りはスマートフォンブラウザで対応
- フェーズ2以降でネイティブアプリを検討

---

### TEC-008: 会計システム連携

**制約内容**:
既存の会計システム（勘定奉行）との連携はフェーズ1では不要

**理由**:
- 会計システム側のAPI提供が未確定
- まずは手動エクスポートで対応

**影響範囲**: システム連携設計

**対応策**:
- 資産台帳をCSV/Excelでエクスポート
- フェーズ2で自動連携を検討

---

### TEC-009: QRコード標準

**制約内容**:
QRコードは標準規格（QR Code Model 2）を使用する

**理由**:
- 汎用QRコードリーダーアプリで読み取り可能にする
- バーコードスキャナーとの互換性

**影響範囲**: 棚卸し機能

**対応策**:
- 専用アプリ不要、ブラウザのカメラ機能で読み取り

---

## ビジネス上の制約

### BIZ-001: 予算制約

**制約内容**:
開発予算は最大3,000万円

**理由**:
- 経営承認済みの予算枠
- 投資回収計画に基づく上限

**影響範囲**: 機能スコープ、技術選定

**対応策**:
- MVP（最小実用製品）アプローチでフェーズ分割
- オープンソースの積極活用

---

### BIZ-002: スケジュール制約

**制約内容**:
- ベータ版リリース: 2025年6月末（絶対期限）
- 正式リリース: 2025年9月末

**理由**:
- 上期棚卸し（7月）前にベータ版で試用
- 下期開始（10月）から本格運用

**影響範囲**: 開発スコープ、品質

**対応策**:
- 機能を3フェーズに分割
- 自動テスト・CI/CDで品質とスピード両立
- バッファを2週間確保

---

### BIZ-003: 人的リソース制約

**制約内容**:
開発チームは最大6名（フロントエンド2名、バックエンド2名、インフラ1名、デザイナー1名）

**理由**:
- 予算制約
- 社内リソースの限界

**影響範囲**: 開発速度、技術選定

**対応策**:
- 生産性の高いツール・フレームワーク選定
- ペアプログラミング・コードレビューでの知識共有

---

### BIZ-004: 総務部との連携

**制約内容**:
総務部からの業務支援は週10時間程度が上限

**理由**:
- 総務部の通常業務との兼ね合い

**影響範囲**: 要件定義、受け入れテスト

**対応策**:
- 効率的なミーティング運営
- ドキュメントによる非同期コミュニケーション

---

### BIZ-005: 既存Excel資産データの移行

**制約内容**:
既存のExcel管理データ（約4,000件）を移行する必要がある
- データ品質: 重複・不整合あり
- 形式: 複数のExcelファイルに分散

**理由**:
- 業務継続性

**影響範囲**: データ移行

**対応策**:
- データクレンジングツールの開発
- 段階的移行とバリデーション
- 移行期間を1ヶ月確保

---

## 法的・規制上の制約

### LEG-001: 個人情報保護法

**制約内容**:
個人情報保護法に準拠した社員情報の取り扱いが必須

**理由**:
- 法的義務

**影響範囲**: データ設計、プライバシーポリシー、運用

**対応策**:
- 利用目的の明示
- アクセス権限の適切な設定
- データ削除機能の実装
- 個人情報管理台帳の整備

---

### LEG-002: 固定資産管理規程

**制約内容**:
社内の固定資産管理規程に準拠する必要がある

**理由**:
- 社内規定
- 会計監査対応

**影響範囲**: データ項目、ワークフロー

**対応策**:
- 経理部門と協議
- 規程で定められた情報項目を網羅

---

### LEG-003: 情報セキュリティポリシー

**制約内容**:
社内情報セキュリティポリシーに準拠必須

**理由**:
- 社内規定
- 情報漏洩リスク管理

**影響範囲**: セキュリティ設計全般

**対応策**:
- 情報システム部との協議
- セキュリティ診断の実施
- 定期的な脆弱性検査

---

### LEG-004: 監査対応

**制約内容**:
内部監査・外部監査に対応可能なログ・証跡管理が必須

**理由**:
- 内部統制
- 監査要件

**影響範囲**: ログ設計、監査証跡

**対応策**:
- 全操作ログの記録
- 改ざん防止措置
- ログ保持期間3年間

---

## 運用上の制約

### OPS-001: 保守・運用体制

**制約内容**:
運用チームは情報システム部2名（平日9-18時、休日・夜間はオンコール対応）

**理由**:
- 組織体制
- コスト制約

**影響範囲**: 運用設計、障害対応

**対応策**:
- 監視・アラート自動化
- 自己修復機能の実装
- 運用マニュアルの整備

---

### OPS-002: データセンター

**制約内容**:
データは日本国内のデータセンターに保管する必要がある

**理由**:
- 個人情報保護法対応
- レイテンシ要件

**影響範囲**: インフラ選定

**対応策**:
- AWS東京リージョンを使用
- バックアップも国内保管

---

### OPS-003: メンテナンスウィンドウ

**制約内容**:
計画メンテナンスは平日20時以降または休日のみ実施可能

**理由**:
- 業務時間中の停止は業務に支障

**影響範囲**: デプロイ計画

**対応策**:
- ゼロダウンタイムデプロイの実現
- 緊急時のみメンテナンスウィンドウ使用

---

### OPS-004: バックアップ

**制約内容**:
データバックアップは毎日実施、30日間保持、暗号化必須

**理由**:
- データ保護
- 監査要件

**影響範囲**: インフラ設計、コスト

**対応策**:
- AWS Backupの利用
- S3へのバックアップ（暗号化有効化）
- 定期的な復旧テスト（月1回）

---

### OPS-005: ログ保存

**制約内容**:
アクセスログ、操作ログは3年間保存

**理由**:
- 監査要件
- 個人情報保護法対応

**影響範囲**: ログ設計、ストレージコスト

**対応策**:
- CloudWatch Logsで集約
- S3へアーカイブ（Glacier使用）

---

## 組織・プロセス上の制約

### ORG-001: 承認プロセス

**制約内容**:
以下の承認が必要：
- 仕様変更（影響大）: プロダクトオーナー（総務部長）承認
- 予算追加: 管理本部長承認
- 外部委託: 調達部門承認（2週間）

**理由**:
- ガバナンス

**影響範囲**: 意思決定速度

**対応策**:
- 小さな変更は自己裁量範囲内で実施
- 承認が必要な事項は早めにエスカレーション

---

### ORG-002: セキュリティ審査

**制約内容**:
リリース前に情報セキュリティ部門の審査が必須（2週間必要）

**理由**:
- 社内規定

**影響範囲**: リリーススケジュール

**対応策**:
- 早期に脆弱性診断を実施
- セキュリティ部門と事前相談
- 審査期間をスケジュールに組み込み

---

### ORG-003: コードレビュー

**制約内容**:
全てのコードは最低1名のレビューが必須（重要箇所は2名）

**理由**:
- 品質保証
- 知識共有

**影響範囲**: 開発速度

**対応策**:
- ペアプログラミングでレビュー時間短縮
- レビュー観点のチェックリスト化

---

### ORG-004: ドキュメント作成

**制約内容**:
以下のドキュメント作成が必須：
- 要件定義書
- 設計書（基本・詳細）
- 運用マニュアル
- セキュリティ審査資料

**理由**:
- 組織標準
- 保守性確保
- 監査対応

**影響範囲**: 工数

**対応策**:
- コードとドキュメントの一体化（自動生成）
- テンプレート活用

---

### ORG-005: 各拠点との調整

**制約内容**:
5拠点（東京、大阪、名古屋、福岡、札幌）それぞれの運用ルール統一が必要

**理由**:
- 拠点間で運用方法が異なる
- 統一ルールの策定が必要

**影響範囲**: 要件定義、トレーニング

**対応策**:
- 早期に拠点責任者を巻き込む
- ベータ版で各拠点のフィードバック収集

---

## 技術的負債・レガシー制約

### LEG-001: 既存Excel資産台帳

**制約内容**:
既存の資産台帳Excel（複数ファイル、約4,000行）を移行する必要がある
- データ品質: 重複・不整合あり
- 列名が統一されていない
- 一部手書き情報あり

**理由**:
- ビジネス継続性

**影響範囲**: データ移行

**対応策**:
- データクレンジング期間を1ヶ月確保
- 移行ツールの開発
- 段階的移行とバリデーション

---

### LEG-002: 既存ラベル・バーコード

**制約内容**:
既存資産に貼付済みのバーコードラベルが混在（複数形式）

**理由**:
- 過去に異なる方式で管理

**影響範囲**: QRコード導入

**対応策**:
- 新規登録資産からQRコード適用
- 既存資産は棚卸し時に順次QRコード化
- 過渡期は両形式に対応

---

## 環境制約

### ENV-001: 開発環境

**制約内容**:
開発者PCは社内標準（Windows 10以上またはmacOS）

**理由**:
- 社内標準

**影響範囲**: 開発環境構築

**対応策**:
- Docker環境の提供
- WSL2推奨（Windows環境）

---

### ENV-002: 社内ネットワーク

**制約内容**:
社内ネットワークから外部インターネットへのアクセスにプロキシが必要

**理由**:
- セキュリティポリシー

**影響範囲**: 開発環境、CI/CD

**対応策**:
- プロキシ設定の自動化
- VPN接続の活用

---

### ENV-003: テスト環境

**制約内容**:
本番相当のテスト環境を用意する必要がある

**理由**:
- セキュリティ審査要件
- 受け入れテスト

**影響範囲**: インフラコスト

**対応策**:
- テスト環境は必要時のみ起動（コスト削減）
- 本番と同じインフラコード使用

---

## 制約の優先順位

制約には以下の優先度があります：

### 絶対遵守（Must）
違反すると法的問題やプロジェクト中止に繋がる

- LEG-001 〜 LEG-004（法的制約）
- BIZ-002（スケジュール制約）
- TEC-004（社内認証システム連携）
- TEC-005（社内ネットワーク制約）

### 強く推奨（Should）
違反すると重大な問題が発生する可能性がある

- BIZ-001（予算制約）
- TEC-001 〜 TEC-003（技術選定）
- OPS-001 〜 OPS-005（運用制約）
- ORG-001 〜 ORG-004（組織プロセス）

### 可能な限り遵守（Could）
違反しても代替案で対応可能

- TEC-007（モバイル対応）
- ORG-005（各拠点との調整）

---

## 制約の緩和可能性

以下の制約は、条件次第で緩和可能：

| 制約ID | 緩和条件 | 承認者 |
|--------|---------|--------|
| BIZ-001 | ROI試算で効果が証明された場合 | 管理本部長 |
| BIZ-002 | 段階的リリースで業務影響が限定的な場合 | 総務部長 |
| TEC-007 | 棚卸し効率化のニーズが明確な場合 | 総務部長 |

---

## 制約に起因するリスク

| 制約 | リスク | 影響度 | 対策 |
|------|--------|--------|------|
| BIZ-002（スケジュール） | 品質低下 | 高 | テスト自動化、MVP絞り込み |
| BIZ-003（人的リソース） | 遅延、属人化 | 中 | ドキュメント整備、ペアプロ |
| BIZ-005（既存データ移行） | データ品質問題 | 高 | クレンジング期間確保、検証強化 |
| TEC-008（会計システム連携見送り） | 手作業による非効率 | 低 | エクスポート機能の充実 |

---

## 制約の変更管理

制約が変更された場合の手続き：

1. **変更提案**: プロジェクトメンバーが変更を提案
2. **影響分析**: PMが影響範囲を分析
3. **承認**: 制約の種類に応じた承認者が判断
4. **ドキュメント更新**: このドキュメントを更新
5. **関係者への通知**: 影響を受けるメンバーへ通知

---

## 関連ドキュメント

- [ビジネス要件](business-requirements.md) - ビジネス上の制約の背景
- [非機能要件](non-functional-requirements.md) - 技術的制約から導かれる要件
- [../02-architecture/](../02-architecture/) - 制約を考慮したアーキテクチャ設計
- [../00-rules/](../00-rules/) - 開発プロセス上の制約

