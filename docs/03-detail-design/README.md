# 03-detail-design - 詳細設計（内部設計）

基本設計の内容をプログラミング可能なレベルまで詳細化します。
「どのように実装するか」を定義するフェーズです。

## 目次

- [ディレクトリ構成](#ディレクトリ構成)
- [各サブディレクトリの説明](#各サブディレクトリの説明)

## ディレクトリ構成

```
03-detail-design/
├── README.md                # このファイル
├── frontend/                # フロントエンド詳細設計
├── backend/                 # バックエンド詳細設計
├── batch/                   # バッチ処理詳細設計
├── state-management/        # 状態管理設計
├── error-handling.md        # エラーハンドリング方針
├── sequence-diagrams/       # シーケンス図
├── class-diagrams/          # クラス図
└── data-flow/               # データフロー図
```

## 各サブディレクトリの説明

### frontend/ - フロントエンド詳細設計

画面ごとのJS処理ロジック、イベントハンドラを定義します。

配置するファイル:
- 画面単位でファイルを作成
- 例: `S001-login.md`, `S002-dashboard.md`

記載内容:
- イベントハンドラの処理フロー
- バリデーション処理
- API呼び出しとレスポンス処理
- エラーハンドリング

### backend/ - バックエンド詳細設計

APIエンドポイントごとの処理ロジックを定義します。

配置するファイル:
- エンドポイント単位またはサービス単位でファイルを作成
- 例: `auth-service.md`, `order-service.md`

記載内容:
- 処理フロー
- ビジネスロジック
- DBアクセス
- 外部API呼び出し
- トランザクション制御

### batch/ - バッチ処理詳細設計

バッチ処理の詳細ロジックを定義します。

配置するファイル:
- バッチ単位でファイルを作成
- 例: `daily-report.md`, `data-sync.md`

記載内容:
- 処理フロー
- 入出力データ
- エラーハンドリング
- リカバリ処理

### state-management/ - 状態管理設計

フロントエンドの状態管理（ストア）を定義します。

配置するファイル:
- ストア単位でファイルを作成
- 例: `user-store.md`, `cart-store.md`

記載内容:
- 状態（State）の定義
- アクション（Actions）の定義
- 状態更新フロー
- 永続化方法

### error-handling.md - エラーハンドリング方針

アプリケーション全体の共通エラー処理を定義します。

記載内容:
- エラーの分類（バリデーション、認証、システム等）
- エラー発生時の処理フロー
- ユーザーへの表示方法
- ログ出力・監視連携

### sequence-diagrams/ - シーケンス図

オブジェクト間のメッセージフローを図示します。

配置するファイル:
- 機能単位またはユースケース単位でファイルを作成
- Mermaid形式で記述
- 例: `login-flow.md`, `order-flow.md`

### class-diagrams/ - クラス図

クラス構造と関連を図示します。

配置するファイル:
- モジュール単位またはドメイン単位でファイルを作成
- Mermaid形式で記述
- 例: `user-domain.md`, `order-domain.md`

### data-flow/ - データフロー図

データの流れと処理を図示します。

配置するファイル:
- 機能単位またはシステム単位でファイルを作成
- Mermaid形式で記述
- 例: `order-data-flow.md`
