# 非機能要件 テンプレート

> **使い方**:このテンプレートは `non-functional-requirements.md` の記述ルールを定義します。
> - 各セクションの「記述ルール」と「記述例」を参考にして内容を記述してください。
> - **出力形式**: 実際に作成するファイルには「記述ルール」と「記述例」は含めず、内容のみを記述してください。
> - **セクションの統一**: 該当しないセクションも削除せず「該当なし」と記載してください。

## 目次

- [可用性](#可用性)
  - [稼働率](#稼働率)
  - [計画停止](#計画停止)
  - [障害復旧目標](#障害復旧目標)
- [性能・拡張性](#性能拡張性)
  - [応答時間](#応答時間)
  - [同時接続・スループット](#同時接続スループット)
  - [拡張性](#拡張性)
- [運用・保守性](#運用保守性)
  - [バックアップ](#バックアップ)
  - [監視](#監視)
  - [ログ](#ログ)
- [セキュリティ](#セキュリティ)
  - [認証・認可](#認証認可)
  - [権限管理](#権限管理)
  - [データ保護](#データ保護)
- [システム環境](#システム環境)
  - [対応ブラウザ](#対応ブラウザ)
  - [対応OS・デバイス](#対応osデバイス)
  - [ネットワーク環境](#ネットワーク環境)
- [アクセシビリティ](#アクセシビリティ)
  - [対応基準](#対応基準)
  - [対応内容](#対応内容)
- [国際化・多言語対応](#国際化多言語対応)
  - [対応言語](#対応言語)
  - [ロケール設定](#ロケール設定)
- [監査・コンプライアンス](#監査コンプライアンス)
  - [監査ログ](#監査ログ)
  - [法規制対応](#法規制対応)
  - [証跡保全](#証跡保全)

---

## 可用性

### 記述ルール

- 稼働率の目標値を明確にする
- 計画停止・障害時の対応方針を記述する
- RTO（目標復旧時間）・RPO（目標復旧地点）を定義する

### 稼働率

#### 記述例

| 項目 | 目標値 | 備考 |
|-----|-------|------|
| 月間稼働率 | 99.9% | 計画停止を除く |
| 年間停止時間 | 8.76時間以内 | |

### 計画停止

#### 記述例

| 項目 | 内容 |
|-----|------|
| メンテナンス時間帯 | 毎月第2日曜日 2:00-6:00 |
| 事前通知 | 1週間前までに通知 |

### 障害復旧目標

#### 記述例

| 項目 | 目標値 |
|-----|-------|
| RTO（目標復旧時間） | 4時間以内 |
| RPO（目標復旧地点） | 1時間以内 |

---

## 性能・拡張性

### 記述ルール

- 応答時間は操作種別ごとに一貫した目標値を設定する
- 同時接続数・スループットを明確にする
- 将来の拡張性を考慮した記述を行う
- 画面・API固有の性能要件は基本設計で定義する

### 応答時間

#### 記述例

| 処理種別 | 目標値 | 備考 |
|---------|-------|------|
| 画面表示 | 3秒以内 | 初期表示 |
| 検索処理 | 5秒以内 | |
| 登録処理 | 2秒以内 | |
| バッチ処理 | 1時間以内 | 日次処理 |

> 画面・API固有の性能要件は基本設計の各仕様書を参照

### 同時接続・スループット

#### 記述例

| 項目 | 目標値 | 備考 |
|-----|-------|------|
| 同時接続ユーザー数 | 100ユーザー | ピーク時 |
| 1日あたりトランザクション数 | 10,000件 | |

### 拡張性

#### 記述例

| 項目 | 現行 | 3年後想定 |
|-----|-----|---------|
| ユーザー数 | 50名 | 200名 |
| データ量 | 10GB | 50GB |

---

## 運用・保守性

### 記述ルール

- バックアップ方針を明確にする
- 監視・ログ要件を定義する
- 保守作業の方針を記述する

### バックアップ

#### 記述例

| 項目 | 内容 |
|-----|------|
| バックアップ方式 | 日次フルバックアップ |
| 保持期間 | 30日間 |
| 保管場所 | 別リージョンのストレージ |

### 監視

#### 記述例

| 監視対象 | 監視内容 | 閾値 |
|---------|---------|-----|
| サーバー | CPU使用率 | 80%以上でアラート |
| サーバー | メモリ使用率 | 80%以上でアラート |
| アプリケーション | エラー率 | 1%以上でアラート |
| アプリケーション | 応答時間 | 5秒以上でアラート |

### ログ

#### 記述例

| ログ種別 | 保持期間 | 用途 |
|---------|---------|-----|
| アクセスログ | 1年 | 監査・調査 |
| エラーログ | 6ヶ月 | 障害調査 |
| 操作ログ | 1年 | 監査 |

---

## セキュリティ

### 記述ルール

- 認証・認可の方式を明確にする
- データ保護の方針を記述する
- セキュリティ対策を列挙する

### 認証・認可

#### 記述例

| 項目 | 内容 |
|-----|------|
| 認証方式 | ID/パスワード + 二要素認証 |
| セッション有効期限 | 30分（操作なしの場合） |
| パスワードポリシー | 8文字以上、英数字記号混在 |
| アカウントロック | 5回連続失敗でロック |

### 権限管理

#### 記述例

| 項目 | 内容 |
|-----|------|
| 権限管理方式 | RBAC（ロールベースアクセス制御） |
| ロール階層 | なし（フラット構造） |
| 権限継承 | なし |
| 動的権限変更 | 即時反映（次回リクエストから適用） |

> アクター定義と機能別権限は [functional-requirements.md](./functional-requirements.md) を参照

### データ保護

#### 記述例

| 項目 | 対策 |
|-----|------|
| 通信暗号化 | TLS 1.3 |
| データ暗号化 | AES-256（個人情報） |
| マスキング | クレジットカード番号等 |

---

## システム環境

### 記述ルール

- 対応ブラウザ・OSを明確にする
- 必要なネットワーク環境を記述する
- 前提条件を列挙する

### 対応ブラウザ

#### 記述例

| ブラウザ | バージョン | 備考 |
|---------|----------|------|
| Google Chrome | リリース時点の最新版 | 推奨 |
| Microsoft Edge | リリース時点の最新版 | |
| Safari | リリース時点の最新版 | macOS/iOS |

### 対応OS・デバイス

#### 記述例

| 種別 | 対応 |
|-----|------|
| Windows | Windows 10以降 |
| macOS | macOS 12以降 |
| iOS | iOS 15以降 |
| Android | Android 12以降 |

### ネットワーク環境

#### 記述例

| 項目 | 要件 |
|-----|------|
| 回線速度 | 10Mbps以上推奨 |
| プロキシ | 対応 |
| VPN | 社外アクセス時必須 |

---

## アクセシビリティ

### 記述ルール

- 対応するアクセシビリティ基準を明確にする
- 対象ユーザーと対応範囲を記述する

### 対応基準

以下から選択して記述する。

| 基準 | 説明 | 主な適用例 |
|-----|------|-----------|
| WCAG 2.1 レベルA | 最低限のアクセシビリティ | 一般的なWebサービス |
| WCAG 2.1 レベルAA | 標準的なアクセシビリティ | 公共機関、金融機関、大企業サイト |
| WCAG 2.1 レベルAAA | 最高レベルのアクセシビリティ | 障害者向けサービス、政府系サイト |
| 該当なし | アクセシビリティ対応不要 | 社内システム、限定ユーザー向けツール |

#### 記述例

| 項目 | 内容 |
|-----|------|
| 準拠基準 | WCAG 2.1 レベルAA |
| 対象範囲 | 全画面 |

### 対応内容

#### 記述例

| 項目 | 対応 |
|-----|------|
| キーボード操作 | 全機能をキーボードのみで操作可能 |
| スクリーンリーダー | 主要画面で対応 |
| 色のコントラスト | 4.5:1以上 |
| フォントサイズ | 拡大表示に対応（200%まで） |

---

## 国際化・多言語対応

### 記述ルール

- 対応言語・地域を明確にする
- 日付・通貨・タイムゾーンの扱いを記述する

### 対応言語

#### 記述例

| 項目 | 内容 |
|-----|------|
| 初期対応言語 | 日本語のみ |
| 将来対応予定 | 英語（Phase 2以降） |

### ロケール設定

#### 記述例

| 項目 | 仕様 |
|-----|------|
| 日付形式 | YYYY/MM/DD（日本）、MM/DD/YYYY（米国） |
| 通貨 | 日本円（JPY） |
| タイムゾーン | JST（Asia/Tokyo）固定 |
| 数値形式 | 3桁カンマ区切り |

---

## 監査・コンプライアンス

### 記述ルール

- 監査要件を明確にする
- 法規制対応の実装方針を記述する（法規制の定義は constraints.md を参照）
- 証跡保全の方針を示す

### 監査ログ

#### 記述例

| 項目 | 内容 |
|-----|------|
| 記録対象 | ログイン、データ変更、権限変更、エクスポート |
| 記録内容 | 操作者、日時、操作内容、操作対象、変更前後の値 |
| 改ざん防止 | 書き込み専用ストレージに保管 |

### 法規制対応

#### 記述例

| 法規制 | 実装方針 |
|-------|---------|
| 個人情報保護法 | 個人情報の暗号化、アクセスログ記録、同意管理機能 |
| 電子帳簿保存法 | タイムスタンプ付与、検索機能、改ざん防止 |
| GDPR | 同意取得UI、データエクスポート機能、削除機能 |

> 準拠すべき法規制の一覧は [constraints.md](./constraints.md) を参照

### 証跡保全

#### 記述例

| 項目 | 内容 |
|-----|------|
| 保全期間 | 7年間 |
| 保管方式 | 改ざん検知可能な形式で保管 |
| 提出対応 | 監査時に指定形式でエクスポート可能 |
