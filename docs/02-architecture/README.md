# アーキテクチャ設計ドキュメント

## 目次

- [概要](#概要)
- [ドキュメント構成](#ドキュメント構成)
  - [screen-design.md](#screen-designmd)
  - [system-architecture.md](#system-architecturemd)
  - [technology-stack.md](#technology-stackmd)
  - [database-design.md](#database-designmd)
  - [infrastructure.md](#infrastructuremd)
  - [security-architecture.md](#security-architecturemd)
  - [performance-design.md](#performance-designmd)
- [使用方法](#使用方法)
  - [新規プロジェクトでの使用](#新規プロジェクトでの使用)
  - [ドキュメント作成の順序](#ドキュメント作成の順序)
- [他のドキュメントとの関連](#他のドキュメントとの関連)
- [記述時の注意点](#記述時の注意点)
  - [一貫性](#一貫性)
  - [トレーサビリティ](#トレーサビリティ)
  - [保守性](#保守性)

## 概要

このディレクトリには、システム全体のアーキテクチャ設計に関するドキュメントを格納します。
アーキテクチャ設計は、要件定義で定義された機能要件・非機能要件を満たすための技術的な実現方法を定義します。

## ドキュメント構成

### [screen-design.md](screen-design.md)
**画面設計**

システムの画面一覧と画面遷移を定義します。

含まれる内容:
- 画面一覧（画面ID、日本語名、英語名、アクセス権限）
- 画面遷移図
- 命名規則
- `03-ui-design` のディレクトリ構成ガイド

### [system-architecture.md](system-architecture.md)
**システムアーキテクチャ**

システム全体の構成とコンポーネント間の関係を定義します。

含まれる内容:
- システム全体構成図
- レイヤー構成（プレゼンテーション層、ビジネスロジック層、データアクセス層）
- コンポーネント構成
- アーキテクチャパターン（MVC、レイヤードアーキテクチャ等）
- データフロー
- 外部システム連携

### [technology-stack.md](technology-stack.md)
**技術スタック**

採用する技術スタックとその選定理由を明記します。

含まれる内容:
- プログラミング言語
- フレームワーク
- データベース
- ミドルウェア
- ライブラリ・パッケージ
- 開発ツール
- 各技術の選定理由と代替案検討

### [database-design.md](database-design.md)
**データベース設計**

データベースの論理設計と物理設計を定義します。

含まれる内容:
- ER図（Entity-Relationship Diagram）
- テーブル定義（テーブル名、カラム定義、制約）
- インデックス設計
- パーティショニング戦略
- 正規化方針
- マイグレーション戦略

### [infrastructure.md](infrastructure.md)
**インフラ構成**

システムを稼働させるためのインフラストラクチャを定義します。

含まれる内容:
- インフラ構成図
- ネットワーク構成
- サーバー構成（Webサーバー、APサーバー、DBサーバー）
- クラウドサービス構成（AWS/GCP/Azure）
- 可用性設計（冗長化、ロードバランシング）
- スケーリング戦略
- 監視・ログ基盤

### [security-architecture.md](security-architecture.md)
**セキュリティアーキテクチャ**

システムのセキュリティ設計を定義します。

含まれる内容:
- 認証・認可方式
- データ暗号化
- 通信の暗号化
- セキュリティ境界
- 脆弱性対策
- セキュリティ監査ログ
- アクセス制御

### [performance-design.md](performance-design.md)
**パフォーマンス設計**

非機能要件で定義されたパフォーマンス要件を満たすための設計方針を定義します。

含まれる内容:
- レスポンスタイム目標と設計方針
- キャッシュ戦略
- データベースパフォーマンス最適化
- 非同期処理設計
- CDN活用
- ボトルネック分析と対策

## 使用方法

### 新規プロジェクトでの使用

1. 各ドキュメントを開く
2. サンプル内容を参考に、プロジェクト固有の内容に置き換える
3. 要件定義（01-requirements）との整合性を確認
4. アーキテクチャ決定記録（ADR: Architecture Decision Record）として重要な意思決定を記録

### ドキュメント作成の順序

以下の順序で作成することを推奨します：

1. **technology-stack.md** - 使用する技術を先に決定
2. **system-architecture.md** - システム全体構成を設計
3. **screen-design.md** - 画面一覧と画面遷移を設計
4. **database-design.md** - データモデルを設計
5. **infrastructure.md** - インフラ構成を設計
6. **security-architecture.md** - セキュリティ設計を組み込む
7. **performance-design.md** - パフォーマンス最適化戦略を策定

**重要**: 各ドキュメントは相互に関連しているため、反復的に見直しと更新を行ってください。

## 他のドキュメントとの関連

- **00-rules/** - アーキテクチャ設計のルールとベストプラクティスを参照
- **01-requirements/** - 機能要件・非機能要件を満たすアーキテクチャを設計
  - 特に非機能要件（パフォーマンス、セキュリティ、可用性）が重要
- **03-ui-design/** - 各画面のUI仕様に反映
- **04-api/** - API設計の基盤となる
- **05-interactions/** - UIとAPIのインタラクション仕様に反映
- **06-tests/** - アーキテクチャ観点でのテスト要件を導出

## 記述時の注意点

### 一貫性

- 要件定義との整合性を保つ
- 各ドキュメント間の矛盾がないようにする
- 用語の定義を統一する

### トレーサビリティ

- 要件定義のどの項目を満たすための設計かを明記
- アーキテクチャ決定の理由を記録（なぜその技術を選んだか）
- トレードオフと代替案を文書化

### 保守性

- 図表を活用して視覚的に理解しやすくする
- コード例を含めて具体的に記述
- 将来の変更を考慮した設計（拡張性、柔軟性）
- 技術的負債を明記

## アーキテクチャ原則

このプロジェクトでは以下のアーキテクチャ原則に従います：

1. **関心の分離** - 各層・コンポーネントの責務を明確にする
2. **疎結合** - コンポーネント間の依存を最小限にする
3. **単一責任の原則** - 1つのコンポーネントは1つの責務のみを持つ
4. **DRY原則** - 同じコードを繰り返さない
5. **セキュアバイデザイン** - 設計段階からセキュリティを考慮
6. **パフォーマンスバイデザイン** - 設計段階からパフォーマンスを考慮

## アーキテクチャレビュー

重要なアーキテクチャ決定は以下のプロセスでレビューを実施します：

1. アーキテクチャ設計書を作成
2. 技術リードによるレビュー
3. ステークホルダーとの合意形成
4. 決定事項の文書化
5. 実装フェーズでの継続的な検証

## 参考資料

アーキテクチャ設計の参考資料：

- Software Architecture Patterns (O'Reilly)
- Clean Architecture (Robert C. Martin)
- Building Microservices (Sam Newman)
- AWS Well-Architected Framework
- 12 Factor App
